function render(){clock.getElapsedTime();floor.visible=!0,floor.visible=!1,mirrorCamera.position.copy(floor.position),mirrorCamera.rotation.set(0,0,0),groundMirror.updateTextureMatrix(),groundMirror.render(),renderer.render(scene,camera),TWEEN.update(),vasa++,requestAnimationFrame(render)}var container,scene,renderer,camera,light,clock,loader,WIDTH,HEIGHT,VIEW_ANGLE,ASPECT,NEAR,FAR;container=document.querySelector(".viewport"),clock=new THREE.Clock,WIDTH=window.innerWidth,HEIGHT=window.innerHeight,VIEW_ANGLE=45,ASPECT=WIDTH/HEIGHT,NEAR=1,FAR=1e4,scene=new THREE.Scene,scene.rotation.x=0,scene.rotation.y=0,scene.rotation.z=0,renderer=new THREE.WebGLRenderer({antialias:!0}),renderer.setSize(WIDTH,HEIGHT),renderer.shadowMapEnabled=!0,renderer.shadowMapSoft=!0,renderer.shadowMapType=THREE.PCFShadowMap,renderer.shadowMapAutoUpdate=!0,renderer.setClearColor(16777215,1),container.appendChild(renderer.domElement),camera=new THREE.PerspectiveCamera(VIEW_ANGLE,ASPECT,NEAR,FAR),mirrorCamera=new THREE.CubeCamera(1,10,1024),camera.position.set(.5105396863227961,3.643376153074933,-1.3890251433637397),camera.rotation.x=-Math.PI/12,scene.add(camera),controls=new THREE.OrbitControls(camera,renderer.domElement),controls.target.set(0,0,0),controls.update(),controls.maxPolarAngle=Math.PI/2-.094,controls.maxDistance=13,light=new THREE.DirectionalLight(16777215),light.intensity=.17,light.position.set(100,100,-150),light.castShadow=!0,light.shadowCameraLeft=-3,light.shadowCameraTop=-3,light.shadowCameraRight=2,light.shadowCameraBottom=2,light.shadowCameraNear=1,light.shadowCameraFar=400,light.shadowBias=-1e-4,light.shadowMapWidth=light.shadowMapHeight=1024,light.shadowDarkness=.001;var ambient=new THREE.AmbientLight(16777215),point=new THREE.PointLight(16777215,.3,1e3);point.shadowCameraLeft=-2,point.shadowCameraTop=-2,point.shadowCameraRight=2,point.shadowCameraBottom=2,point.shadowCameraNear=1,point.shadowCameraFar=1e3,point.shadowBias=-1e-4,point.shadowMapWidth=point.shadowMapHeight=256,point.shadowDarkness=.001,ambient.intensity=.9,scene.add(light),scene.add(ambient,point),point.position.x=1,point.position.y=3,point.position.z=5,loader=new THREE.JSONLoader,scene.add(mirrorCamera);var mesh,container,maxAnisotropy=renderer.getMaxAnisotropy(),floor_geometry=new THREE.BoxGeometry(10,.001,10),floor_material=new THREE.MeshBasicMaterial({envMap:mirrorCamera.renderTarget}),planeGeo=new THREE.PlaneBufferGeometry(100.1,100.1),groundMirror=new THREE.Mirror(renderer,camera,{clipBias:1,textureWidth:WIDTH,textureHeight:HEIGHT,color:15527148}),texture=groundMirror.material,mirrorMesh=new THREE.Mesh(planeGeo,texture);mirrorMesh.add(groundMirror),mirrorMesh.rotateX(-Math.PI/2);var maze_geometry=new THREE.BoxGeometry(1,.3,.01),maze_geometry2=new THREE.BoxGeometry(5,.3,.01),maze_material=new THREE.MeshLambertMaterial({color:0}),yellow_material=new THREE.MeshLambertMaterial({color:5558703}),maze=new THREE.Mesh(maze_geometry,maze_material),maze2=new THREE.Mesh(maze_geometry,maze_material),maze3=new THREE.Mesh(maze_geometry,maze_material),maze4=new THREE.Mesh(maze_geometry,maze_material),maze5=new THREE.Mesh(maze_geometry2,maze_material),maze6=new THREE.Mesh(maze_geometry2,maze_material),center=new THREE.Mesh,center2=new THREE.Mesh,mazeLineGeom=new THREE.Geometry,mazeLineGeom2=new THREE.Geometry,mazeLineGeom3=new THREE.Geometry,yellowGeom=new THREE.Geometry;mazeLineGeom.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,1),new THREE.Vector3(-1,0,0)),mazeLineGeom2.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,1,0),new THREE.Vector3(1,1,0),new THREE.Vector3(1,0,0)),mazeLineGeom3.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,.1,0),new THREE.Vector3(8,.1,0),new THREE.Vector3(8,0,0)),yellowGeom.vertices.push(new THREE.Vector3(0,0,0),new THREE.Vector3(0,.15,0),new THREE.Vector3(7,.15,0),new THREE.Vector3(7,0,0)),mazeLineGeom.faces.push(new THREE.Face4(0,1,2,3)),mazeLineGeom2.faces.push(new THREE.Face3(0,1,2)),mazeLineGeom2.faces.push(new THREE.Face3(0,2,3)),mazeLineGeom3.faces.push(new THREE.Face3(0,1,2)),mazeLineGeom3.faces.push(new THREE.Face3(0,2,3)),yellowGeom.faces.push(new THREE.Face3(0,1,2)),yellowGeom.faces.push(new THREE.Face3(0,2,3)),mazeLineGeom.computeBoundingSphere(),mazeLineGeom2.computeBoundingSphere(),mazeLineGeom3.computeBoundingSphere(),yellowGeom.computeBoundingSphere();var mazeShape=new THREE.Mesh(mazeLineGeom,maze_material),mazeShape2=new THREE.Mesh(mazeLineGeom2,maze_material),mazeShape3=new THREE.Mesh(mazeLineGeom3,maze_material),yellowShape=new THREE.Mesh(yellowGeom,yellow_material);mazeShape.position.y=2,mazeShape2.position.y=3,mazeShape2.position.x=0,mazeShape3.position.x=-3,yellowShape.position.set(-3,1.5,-1),yellowShape.rotation.y=-Math.PI/4;var position=camera.position,fov=20;camera.fov=fov;var vasa=40;camera.updateProjectionMatrix(),center2.add(mazeShape,mazeShape2,mazeShape3,yellowShape,center);var tween=new TWEEN.Tween(position).to({x:3.2082860101275177,y:12.158120414010359,z:-3.299546768215996},8e3).easing(TWEEN.Easing.Quartic.InOut),tween2=new TWEEN.Tween(position).to({x:-4.217951970039052,y:11.951513296555966,z:-2.8931317116041537},8e3).easing(TWEEN.Easing.Quartic.InOut),tween3=new TWEEN.Tween(position).to({x:-9226082225396355e-21,y:12.999999999993499,z:9158570126944982e-21},8e3).easing(TWEEN.Easing.Quartic.InOut),tween4=new TWEEN.Tween(fov).to(vasa,1e3).easing(TWEEN.Easing.Quartic.InOut);tween4.start(),tween.chain(tween2),tween2.chain(tween3),tween3.chain(tween),tween.onUpdate(function(){camera.position.x=position.x,camera.position.y=position.y,camera.position.z=position.z}),tween2.onUpdate(function(){camera.position.x=position.x,camera.position.y=position.y,camera.position.z=position.z}),tween3.onUpdate(function(){camera.position.x=position.x,camera.position.y=position.y,camera.position.z=position.z}),tween4.onUpdate(function(){console.log(fov),camera.fov=fov,camera.updateProjectionMatrix()}),maze2.position.x=-.5,maze2.position.z=-.5,maze2.rotation.y=Math.PI/2,maze3.position.x=.5,maze3.position.z=-.5,maze3.rotation.y=Math.PI/2,maze4.position.z=-1,maze5.position.z=-.5,maze5.rotation.y=Math.PI/4,maze5.position.z=-.5,maze5.rotation.y=Math.PI/4,maze6.position.z=.5,maze6.rotation.y=Math.PI/4,center.position.z=.5,center.add(maze,maze2,maze3,maze4,maze5,maze6),scene.add(center2);var cameraPosX=.44426790438853775,cameraPosY=3.6624066401248725,cameraPosZ=-1.9126542045900217;camera.position.set(.44426790438853775,3.6624066401248725,-1.9126542045900217),camera.rotation.set(-3.047493474219677,-.04584905340038268,-3.137267058875789),floor=new THREE.Mesh(floor_geometry,floor_material),mirrorCamera.position=floor.position,floor.receiveShadow=!0,center2.add(floor),center2.add(mirrorMesh),scene.fog=new THREE.FogExp2(10066431,25e-5),vasa=0,render(),center2.direction=1;